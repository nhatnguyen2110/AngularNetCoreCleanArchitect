2022-04-05 10:25:13.143 +07:00 [INF] Starting Duende IdentityServer version 5.2.0+1c3f1fadb0fa7a4bea3f4a6f7028cbfcff3b9918 (.NET 6.0.3)
2022-04-05 10:25:14.262 +07:00 [WRN] You do not have a valid license key for Duende IdentityServer. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please start a conversation with us: https://duendesoftware.com/contact
2022-04-05 10:25:15.282 +07:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2022-04-05 10:25:15.282 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2022-04-05 10:25:15.309 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-04-05 10:25:15.310 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-04-05 10:25:15.311 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2022-04-05 10:25:15.311 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2022-04-05 10:25:17.436 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-05 10:25:17.436 +07:00 [INF] Hosting environment: Development
2022-04-05 10:25:17.436 +07:00 [INF] Content root path: D:\My Projects\Clean-Architecture\CleanArchitecture-main\src\WebUI
2022-04-05 10:25:18.594 +07:00 [DBG] Login Url: /Identity/Account/Login
2022-04-05 10:25:18.599 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-04-05 10:25:18.600 +07:00 [DBG] Logout Url: /Identity/Account/Logout
2022-04-05 10:25:18.600 +07:00 [DBG] ConsentUrl Url: /consent
2022-04-05 10:25:18.600 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-04-05 10:25:18.601 +07:00 [DBG] Error Url: /Home
2022-04-05 10:25:18.601 +07:00 [DBG] Error Id Parameter: errorId
2022-04-05 10:25:59.996 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-04-05 10:26:00.089 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-04-05 10:26:00.103 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-05 10:26:00.111 +07:00 [DBG] Start discovery request
2022-04-05 10:26:00.166 +07:00 [DBG] Getting all the keys.
2022-04-05 10:26:00.174 +07:00 [DBG] Cache miss when loading all keys.
2022-04-05 10:26:00.181 +07:00 [DBG] Loading keys from store.
2022-04-05 10:26:00.902 +07:00 [DBG] Keys successfully returned from store.
2022-04-05 10:26:00.906 +07:00 [DBG] Caching keys with KeyCacheDuration for "1.00:00:00"
2022-04-05 10:26:00.924 +07:00 [DBG] Looking for active signing keys.
2022-04-05 10:26:00.926 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 10:26:00.939 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:00.939 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:00.955 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:00.955 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "34.00:28:19"
2022-04-05 10:26:01.031 +07:00 [DBG] Getting the current key.
2022-04-05 10:26:01.031 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 10:26:01.031 +07:00 [DBG] Looking for active signing keys.
2022-04-05 10:26:01.032 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 10:26:01.033 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:01.033 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:01.034 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:26:01.035 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "34.00:28:18"
2022-04-05 10:26:01.036 +07:00 [INF] Active signing key found with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C for alg RS256. Expires in "48.00:28:18". Retires in "62.00:28:18"
2022-04-05 10:26:01.123 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-04-05 10:26:01.159 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-04-05 10:26:01.160 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-05 10:26:01.164 +07:00 [DBG] Start authorize request
2022-04-05 10:26:01.203 +07:00 [DBG] No user present in authorize request
2022-04-05 10:26:01.630 +07:00 [DBG] Start authorize request protocol validation
2022-04-05 10:26:01.663 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:26:01.725 +07:00 [DBG] Checking for PKCE parameters
2022-04-05 10:26:01.808 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-04-05 10:26:01.851 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"7469e574cd464973b739ab797b55a74a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"7469e574cd464973b739ab797b55a74a","code_challenge":"zLON2ajfhMjhenUFCjXe7cIgPDp7ISD_vXPIOCs_U90","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-04-05 10:26:01.919 +07:00 [INF] Showing login: User is not authenticated
2022-04-05 10:26:01.920 +07:00 [INF] Changing response to LoginRequired: prompt=none was requested
2022-04-05 10:26:01.925 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"7469e574cd464973b739ab797b55a74a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"7469e574cd464973b739ab797b55a74a","code_challenge":"zLON2ajfhMjhenUFCjXe7cIgPDp7ISD_vXPIOCs_U90","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-04-05 10:26:01.943 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000002-0004-fc00-b63f-84710c7967bb","TimeStamp":"2022-04-05T03:26:01.0000000Z","ProcessId":14920,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-04-05 10:26:03.693 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-04-05 10:26:03.700 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-04-05 10:26:03.700 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-05 10:26:03.701 +07:00 [DBG] Start authorize request
2022-04-05 10:26:03.703 +07:00 [DBG] No user present in authorize request
2022-04-05 10:26:03.703 +07:00 [DBG] Start authorize request protocol validation
2022-04-05 10:26:03.705 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:26:03.706 +07:00 [DBG] Checking for PKCE parameters
2022-04-05 10:26:03.707 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-04-05 10:26:03.709 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"d260b059355a48ecbf1c95f18456fb86","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"d260b059355a48ecbf1c95f18456fb86","code_challenge":"ND-upF7FVjMcd-xwH4iTv3UnxNJ2MiIuP0TYnVkjBmg","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-04-05 10:26:03.710 +07:00 [INF] Showing login: User is not authenticated
2022-04-05 10:32:13.120 +07:00 [DBG] Augmenting SignInContext
2022-04-05 10:32:13.124 +07:00 [DBG] Adding idp claim with value: local
2022-04-05 10:32:13.125 +07:00 [DBG] Adding auth_time claim with value: 1649129533
2022-04-05 10:32:13.175 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2022-04-05 10:32:13.177 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeCallbackEndpoint
2022-04-05 10:32:13.177 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-05 10:32:13.182 +07:00 [DBG] Start authorize callback request
2022-04-05 10:32:13.183 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-04-05 10:32:13.183 +07:00 [DBG] Start authorize request protocol validation
2022-04-05 10:32:13.184 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:13.184 +07:00 [DBG] Checking for PKCE parameters
2022-04-05 10:32:13.186 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-04-05 10:32:13.196 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"d260b059355a48ecbf1c95f18456fb86","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"553D1F4D1388735EA6A53FB02A7694CA","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"d260b059355a48ecbf1c95f18456fb86","code_challenge":"ND-upF7FVjMcd-xwH4iTv3UnxNJ2MiIuP0TYnVkjBmg","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-04-05 10:32:13.351 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-04-05 10:32:13.360 +07:00 [DBG] Creating Authorization Code Flow response.
2022-04-05 10:32:13.499 +07:00 [DBG] c+zzguH6KGdr2hzXVT5ybU6GEjpY/A2TzXEvJ9JBz7I= not found in database
2022-04-05 10:32:14.761 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****85C3","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000008-0005-fc00-b63f-84710c7967bb","TimeStamp":"2022-04-05T03:32:14.0000000Z","ProcessId":14920,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-04-05 10:32:14.765 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"d260b059355a48ecbf1c95f18456fb86","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-04-05 10:32:14.779 +07:00 [DBG] Augmenting SignInContext
2022-04-05 10:32:18.264 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-04-05 10:32:18.265 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-04-05 10:32:18.265 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-05 10:32:18.265 +07:00 [DBG] Start discovery request
2022-04-05 10:32:18.266 +07:00 [DBG] Getting all the keys.
2022-04-05 10:32:18.266 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 10:32:18.266 +07:00 [DBG] Looking for active signing keys.
2022-04-05 10:32:18.267 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 10:32:18.267 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.268 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.269 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.269 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "34.00:22:01"
2022-04-05 10:32:18.271 +07:00 [DBG] Getting the current key.
2022-04-05 10:32:18.271 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 10:32:18.271 +07:00 [DBG] Looking for active signing keys.
2022-04-05 10:32:18.272 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 10:32:18.273 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.273 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.274 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:18.274 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "34.00:22:01"
2022-04-05 10:32:18.274 +07:00 [INF] Active signing key found with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C for alg RS256. Expires in "48.00:22:01". Retires in "62.00:22:01"
2022-04-05 10:32:18.493 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-04-05 10:32:18.500 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-04-05 10:32:18.500 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-04-05 10:32:18.515 +07:00 [DBG] Start token request.
2022-04-05 10:32:18.523 +07:00 [DBG] Start client validation
2022-04-05 10:32:18.543 +07:00 [DBG] Start parsing Basic Authentication secret
2022-04-05 10:32:18.568 +07:00 [DBG] Start parsing for secret in post body
2022-04-05 10:32:18.569 +07:00 [DBG] client id without secret found
2022-04-05 10:32:18.571 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-04-05 10:32:18.571 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-04-05 10:32:18.572 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:18.572 +07:00 [DBG] Public Client - skipping secret validation success
2022-04-05 10:32:18.572 +07:00 [DBG] Client validation success
2022-04-05 10:32:18.576 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"8000000f-0006-fb00-b63f-84710c7967bb","TimeStamp":"2022-04-05T03:32:18.0000000Z","ProcessId":14920,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-04-05 10:32:18.585 +07:00 [DBG] Start token request validation
2022-04-05 10:32:18.597 +07:00 [DBG] Start validation of authorization code token request
2022-04-05 10:32:18.654 +07:00 [DBG] c+zzguH6KGdr2hzXVT5ybU6GEjpY/A2TzXEvJ9JBz7I= found in database: true
2022-04-05 10:32:18.713 +07:00 [DBG] removing c+zzguH6KGdr2hzXVT5ybU6GEjpY/A2TzXEvJ9JBz7I= persisted grant from database
2022-04-05 10:32:18.799 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-04-05 10:32:18.813 +07:00 [DBG] Validation of authorization code token request success
2022-04-05 10:32:18.822 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****85C3","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"E9445C422E7D731DD60D3A66ADFD4C22F412B0770A0B1153202F00DA08F285C3","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"e99eee7072f84fbba56350d171e1c59080a12e744eab4b6796e178ceb40abdebcdae5093002e4610af57be627a338bab","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-04-05 10:32:18.846 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:18.877 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-04-05 10:32:18.879 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-04-05 10:32:19.514 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:19.532 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-04-05 10:32:19.532 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-04-05 10:32:19.548 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****NPig","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8dJg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000000f-0006-fb00-b63f-84710c7967bb","TimeStamp":"2022-04-05T03:32:19.0000000Z","ProcessId":14920,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-04-05 10:32:19.549 +07:00 [DBG] Token request success.
2022-04-05 10:32:19.783 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-04-05 10:32:19.787 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-04-05 10:32:19.788 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-05 10:32:19.796 +07:00 [DBG] Start userinfo request
2022-04-05 10:32:19.803 +07:00 [DBG] Bearer token found in header
2022-04-05 10:32:19.818 +07:00 [DBG] Getting all the keys.
2022-04-05 10:32:19.818 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 10:32:19.818 +07:00 [DBG] Looking for active signing keys.
2022-04-05 10:32:19.818 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 10:32:19.819 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:19.819 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:19.819 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 10:32:19.819 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "34.00:22:00"
2022-04-05 10:32:19.896 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:19.902 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 10:32:19.918 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-04-05 10:32:19.921 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"29D370490B5D74CD63F9E6C68412C3F5","Claims":{"iss":"https://localhost:44312","nbf":1649129538,"iat":1649129538,"exp":1649133138,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1649129533,"idp":"local","sid":"553D1F4D1388735EA6A53FB02A7694CA","jti":"29D370490B5D74CD63F9E6C68412C3F5"},"$type":"TokenValidationLog"}
2022-04-05 10:32:19.937 +07:00 [DBG] Creating userinfo response
2022-04-05 10:32:19.941 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-04-05 10:32:19.950 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-04-05 10:32:19.974 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-04-05 10:32:19.974 +07:00 [DBG] End userinfo request
2022-04-05 10:32:20.008 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-04-05 10:32:20.009 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-04-05 10:32:20.010 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-04-05 10:32:20.012 +07:00 [DBG] Rendering check session result
2022-04-05 11:42:05.180 +07:00 [INF] Starting Duende IdentityServer version 5.2.0+1c3f1fadb0fa7a4bea3f4a6f7028cbfcff3b9918 (.NET 6.0.3)
2022-04-05 11:42:05.733 +07:00 [WRN] You do not have a valid license key for Duende IdentityServer. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please start a conversation with us: https://duendesoftware.com/contact
2022-04-05 11:42:06.644 +07:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2022-04-05 11:42:06.644 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2022-04-05 11:42:06.646 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-04-05 11:42:06.647 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-04-05 11:42:06.647 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2022-04-05 11:42:06.648 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2022-04-05 11:42:08.278 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-05 11:42:08.279 +07:00 [INF] Hosting environment: Development
2022-04-05 11:42:08.279 +07:00 [INF] Content root path: D:\My Projects\Clean-Architecture\CleanArchitecture-main\src\WebUI
2022-04-05 11:42:09.298 +07:00 [DBG] Login Url: /Identity/Account/Login
2022-04-05 11:42:09.304 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-04-05 11:42:09.305 +07:00 [DBG] Logout Url: /Identity/Account/Logout
2022-04-05 11:42:09.305 +07:00 [DBG] ConsentUrl Url: /consent
2022-04-05 11:42:09.306 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-04-05 11:42:09.306 +07:00 [DBG] Error Url: /Home
2022-04-05 11:42:09.307 +07:00 [DBG] Error Id Parameter: errorId
2022-04-05 12:05:59.833 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-04-05 12:05:59.905 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-04-05 12:05:59.913 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-05 12:05:59.945 +07:00 [DBG] Start discovery request
2022-04-05 12:06:00.080 +07:00 [DBG] Getting all the keys.
2022-04-05 12:06:00.094 +07:00 [DBG] Cache miss when loading all keys.
2022-04-05 12:06:00.102 +07:00 [DBG] Loading keys from store.
2022-04-05 12:06:01.065 +07:00 [DBG] Keys successfully returned from store.
2022-04-05 12:06:01.070 +07:00 [DBG] Caching keys with KeyCacheDuration for "1.00:00:00"
2022-04-05 12:06:01.119 +07:00 [DBG] Looking for active signing keys.
2022-04-05 12:06:01.120 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 12:06:01.132 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.132 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.144 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.145 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "33.22:48:18"
2022-04-05 12:06:01.242 +07:00 [DBG] Getting the current key.
2022-04-05 12:06:01.243 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 12:06:01.243 +07:00 [DBG] Looking for active signing keys.
2022-04-05 12:06:01.243 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 12:06:01.244 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.245 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.246 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:01.246 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "33.22:48:18"
2022-04-05 12:06:01.247 +07:00 [INF] Active signing key found with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C for alg RS256. Expires in "47.22:48:18". Retires in "61.22:48:18"
2022-04-05 12:06:01.412 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-04-05 12:06:01.470 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-04-05 12:06:01.470 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-05 12:06:01.478 +07:00 [DBG] Start authorize request
2022-04-05 12:06:01.525 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-04-05 12:06:01.673 +07:00 [DBG] Start authorize request protocol validation
2022-04-05 12:06:01.708 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:01.760 +07:00 [DBG] Checking for PKCE parameters
2022-04-05 12:06:01.853 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-04-05 12:06:01.898 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"9e4822afa92242cea0a2ff3dfc8b5811","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"553D1F4D1388735EA6A53FB02A7694CA","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"9e4822afa92242cea0a2ff3dfc8b5811","code_challenge":"h_daak0QBF4hvInnuqiwJfg5Ss341lPuHRbLS3YZdSI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-04-05 12:06:02.044 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-04-05 12:06:02.053 +07:00 [DBG] Creating Authorization Code Flow response.
2022-04-05 12:06:02.301 +07:00 [DBG] FWlZ+3hE0fD/Xe7QbIOrPFUjckkjmssmQsibk+rOXkU= not found in database
2022-04-05 12:06:03.866 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****EFDB","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000007-0002-fb00-b63f-84710c7967bb","TimeStamp":"2022-04-05T05:06:03.0000000Z","ProcessId":6656,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-04-05 12:06:03.871 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"9e4822afa92242cea0a2ff3dfc8b5811","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-04-05 12:06:07.800 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-04-05 12:06:07.807 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-04-05 12:06:07.807 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-04-05 12:06:07.816 +07:00 [DBG] Start token request.
2022-04-05 12:06:07.821 +07:00 [DBG] Start client validation
2022-04-05 12:06:07.839 +07:00 [DBG] Start parsing Basic Authentication secret
2022-04-05 12:06:07.843 +07:00 [DBG] Start parsing for secret in post body
2022-04-05 12:06:07.861 +07:00 [DBG] client id without secret found
2022-04-05 12:06:07.862 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-04-05 12:06:07.862 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-04-05 12:06:07.863 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:07.863 +07:00 [DBG] Public Client - skipping secret validation success
2022-04-05 12:06:07.863 +07:00 [DBG] Client validation success
2022-04-05 12:06:07.867 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"8000001f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2022-04-05T05:06:07.0000000Z","ProcessId":6656,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-04-05 12:06:07.874 +07:00 [DBG] Start token request validation
2022-04-05 12:06:07.884 +07:00 [DBG] Start validation of authorization code token request
2022-04-05 12:06:07.950 +07:00 [DBG] FWlZ+3hE0fD/Xe7QbIOrPFUjckkjmssmQsibk+rOXkU= found in database: true
2022-04-05 12:06:08.000 +07:00 [DBG] removing FWlZ+3hE0fD/Xe7QbIOrPFUjckkjmssmQsibk+rOXkU= persisted grant from database
2022-04-05 12:06:08.125 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-04-05 12:06:08.154 +07:00 [DBG] Validation of authorization code token request success
2022-04-05 12:06:08.173 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****EFDB","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"1606EA719F19798B55CB93740A82C3BFB3B43EAC021F9C92500967A3A544EFDB","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"c77c05ba067e41a3accf03c94cd379d5c94cb195cfd54d66adc71799cd10956c214d13e772294a1888150a399dfae4d5","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-04-05 12:06:08.203 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:08.253 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-04-05 12:06:08.254 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-04-05 12:06:09.151 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:09.173 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-04-05 12:06:09.174 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-04-05 12:06:09.189 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****_sQA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****l8sg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000001f-0000-fd00-b63f-84710c7967bb","TimeStamp":"2022-04-05T05:06:09.0000000Z","ProcessId":6656,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-04-05 12:06:09.190 +07:00 [DBG] Token request success.
2022-04-05 12:06:09.417 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-04-05 12:06:09.419 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-04-05 12:06:09.420 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-05 12:06:09.426 +07:00 [DBG] Start userinfo request
2022-04-05 12:06:09.431 +07:00 [DBG] Bearer token found in header
2022-04-05 12:06:09.442 +07:00 [DBG] Getting all the keys.
2022-04-05 12:06:09.442 +07:00 [DBG] Cache hit when loading all keys.
2022-04-05 12:06:09.442 +07:00 [DBG] Looking for active signing keys.
2022-04-05 12:06:09.443 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-04-05 12:06:09.443 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:09.443 +07:00 [DBG] Found active signing key for alg RS256 with kid 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:09.444 +07:00 [DBG] Active signing key found (respecting the activation delay) with kid: 4EC832F91DDF6A8CD3CDFFF491EBA14C.
2022-04-05 12:06:09.444 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "33.22:48:10"
2022-04-05 12:06:09.503 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:09.508 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-04-05 12:06:09.523 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-04-05 12:06:09.527 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"6EFFBAD623B1F7710E7CC49A6CC9648B","Claims":{"iss":"https://localhost:44312","nbf":1649135168,"iat":1649135168,"exp":1649138768,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1649129533,"idp":"local","sid":"553D1F4D1388735EA6A53FB02A7694CA","jti":"6EFFBAD623B1F7710E7CC49A6CC9648B"},"$type":"TokenValidationLog"}
2022-04-05 12:06:09.549 +07:00 [DBG] Creating userinfo response
2022-04-05 12:06:09.554 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-04-05 12:06:09.561 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-04-05 12:06:09.600 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-04-05 12:06:09.600 +07:00 [DBG] End userinfo request
2022-04-05 12:06:09.639 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-04-05 12:06:09.641 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-04-05 12:06:09.641 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-04-05 12:06:09.643 +07:00 [DBG] Rendering check session result
2022-04-05 12:06:16.979 +07:00 [INF] Request: GetWeatherForecastsQuery 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"$type":"GetWeatherForecastsQuery"}
2022-04-05 12:28:39.368 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (The remote party closed the WebSocket connection without completing the close handshake.)
 ---> System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.ReadBufferedAsyncCore(Memory`1 destination)
   at System.Net.Http.HttpConnection.RawConnectionStream.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken, Boolean throwOnPrematureClosure)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.PumpWebSocket(WebSocket source, WebSocket destination, Int32 bufferSize, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.AcceptProxyWebSocketRequest(HttpContext context, Uri destinationUri, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.PerformProxyRequest(HttpContext context, HttpClient httpClient, Task`1 baseUriTask, CancellationToken applicationStoppingToken, Boolean proxy404s)
   at Microsoft.AspNetCore.Builder.SpaProxyingExtensions.<>c__DisplayClass2_0.<<UseProxyToSpaDevelopmentServer>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Duende.IdentityServer.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IIssuerNameService issuerNameService, IBackChannelLogoutService backChannelLogoutService) in /_/src/IdentityServer/Hosting/IdentityServerMiddleware.cs:line 103
   at Duende.IdentityServer.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in /_/src/IdentityServer/Hosting/MutualTlsEndpointMiddleware.cs:line 95
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Duende.IdentityServer.Hosting.DynamicProviders.DynamicSchemeAuthenticationMiddleware.Invoke(HttpContext context) in /_/src/IdentityServer/Hosting/DynamicProviders/DynamicSchemes/DynamicSchemeAuthenticationMiddleware.cs:line 48
   at Duende.IdentityServer.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in /_/src/IdentityServer/Hosting/BaseUrlMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 123
   at NSwag.AspNetCore.Middlewares.SwaggerUiIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.RedirectToIndexMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-04-05 12:28:39.917 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2022-04-05 12:28:39.933 +07:00 [ERR] Connection ID "18374686507052040220", Request ID "8000001d-0006-ff00-b63f-84710c7967bb": An unhandled exception was thrown by the application.
System.AggregateException: One or more errors occurred. (The remote party closed the WebSocket connection without completing the close handshake.)
 ---> System.Net.WebSockets.WebSocketException (0x80004005): The remote party closed the WebSocket connection without completing the close handshake.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.ReadBufferedAsyncCore(Memory`1 destination)
   at System.Net.Http.HttpConnection.RawConnectionStream.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.EnsureBufferContainsAsync(Int32 minimumRequiredBytes, CancellationToken cancellationToken, Boolean throwOnPrematureClosure)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Net.WebSockets.ManagedWebSocket.ReceiveAsyncPrivate[TResult](Memory`1 payloadBuffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask`1.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.PumpWebSocket(WebSocket source, WebSocket destination, Int32 bufferSize, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.AcceptProxyWebSocketRequest(HttpContext context, Uri destinationUri, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.SpaServices.Extensions.Proxy.SpaProxy.PerformProxyRequest(HttpContext context, HttpClient httpClient, Task`1 baseUriTask, CancellationToken applicationStoppingToken, Boolean proxy404s)
   at Microsoft.AspNetCore.Builder.SpaProxyingExtensions.<>c__DisplayClass2_0.<<UseProxyToSpaDevelopmentServer>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Duende.IdentityServer.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IIssuerNameService issuerNameService, IBackChannelLogoutService backChannelLogoutService) in /_/src/IdentityServer/Hosting/IdentityServerMiddleware.cs:line 103
   at Duende.IdentityServer.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in /_/src/IdentityServer/Hosting/MutualTlsEndpointMiddleware.cs:line 95
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Duende.IdentityServer.Hosting.DynamicProviders.DynamicSchemeAuthenticationMiddleware.Invoke(HttpContext context) in /_/src/IdentityServer/Hosting/DynamicProviders/DynamicSchemes/DynamicSchemeAuthenticationMiddleware.cs:line 48
   at Duende.IdentityServer.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in /_/src/IdentityServer/Hosting/BaseUrlMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at AspNetCoreRateLimit.RateLimitMiddleware`1.Invoke(HttpContext context) in C:\Users\User\Documents\Github\AspNetCoreRateLimit\src\AspNetCoreRateLimit\Middleware\RateLimitMiddleware.cs:line 123
   at NSwag.AspNetCore.Middlewares.SwaggerUiIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.RedirectToIndexMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.IIS.Core.IISHttpContextOfT`1.ProcessRequestAsync()
2022-04-05 16:22:02.972 +07:00 [INF] Starting Duende IdentityServer version 5.2.0+1c3f1fadb0fa7a4bea3f4a6f7028cbfcff3b9918 (.NET 6.0.3)
2022-04-05 16:22:03.633 +07:00 [WRN] You do not have a valid license key for Duende IdentityServer. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please start a conversation with us: https://duendesoftware.com/contact
2022-04-05 16:22:05.409 +07:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2022-04-05 16:22:05.410 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2022-04-05 16:22:05.411 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-04-05 16:22:05.411 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-04-05 16:22:05.412 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2022-04-05 16:22:05.412 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2022-04-05 16:22:06.637 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-05 16:22:06.638 +07:00 [INF] Hosting environment: Development
2022-04-05 16:22:06.638 +07:00 [INF] Content root path: D:\My Projects\Clean-Architecture\CleanArchitecture-main\src\WebUI
2022-04-05 16:22:07.633 +07:00 [DBG] Login Url: /Identity/Account/Login
2022-04-05 16:22:07.636 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-04-05 16:22:07.636 +07:00 [DBG] Logout Url: /Identity/Account/Logout
2022-04-05 16:22:07.637 +07:00 [DBG] ConsentUrl Url: /consent
2022-04-05 16:22:07.637 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-04-05 16:22:07.637 +07:00 [DBG] Error Url: /Home
2022-04-05 16:22:07.638 +07:00 [DBG] Error Id Parameter: errorId
2022-04-05 16:26:00.328 +07:00 [INF] Request: GetWeatherForecastsQuery   {"$type":"GetWeatherForecastsQuery"}
2022-04-05 16:32:05.889 +07:00 [INF] Request: GetWeatherForecastsQuery   {"$type":"GetWeatherForecastsQuery"}
