2022-05-27 15:30:07.972 +07:00 [INF] Starting Duende IdentityServer version 5.2.0+1c3f1fadb0fa7a4bea3f4a6f7028cbfcff3b9918 (.NET 6.0.3)
2022-05-27 15:30:08.803 +07:00 [WRN] You do not have a valid license key for Duende IdentityServer. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please start a conversation with us: https://duendesoftware.com/contact
2022-05-27 15:30:09.855 +07:00 [INF] Using explicitly configured authentication scheme Identity.Application for IdentityServer
2022-05-27 15:30:09.855 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for authentication
2022-05-27 15:30:09.857 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-05-27 15:30:09.858 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-05-27 15:30:09.858 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for challenge
2022-05-27 15:30:09.859 +07:00 [DBG] Using IdentityServerJwt as default ASP.NET Core scheme for forbid
2022-05-27 15:30:11.366 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-27 15:30:11.367 +07:00 [INF] Hosting environment: Development
2022-05-27 15:30:11.367 +07:00 [INF] Content root path: D:\My Projects\Clean-Architecture\CleanArchitecture-main\src\WebUI
2022-05-27 15:30:12.819 +07:00 [DBG] Login Url: /Identity/Account/Login
2022-05-27 15:30:12.828 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-05-27 15:30:12.829 +07:00 [DBG] Logout Url: /Identity/Account/Logout
2022-05-27 15:30:12.829 +07:00 [DBG] ConsentUrl Url: /consent
2022-05-27 15:30:12.829 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-05-27 15:30:12.830 +07:00 [DBG] Error Url: /Home
2022-05-27 15:30:12.830 +07:00 [DBG] Error Id Parameter: errorId
2022-05-27 15:31:04.017 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 15:31:04.359 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 15:31:04.361 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 15:31:04.365 +07:00 [DBG] Start discovery request
2022-05-27 15:31:04.415 +07:00 [DBG] Getting all the keys.
2022-05-27 15:31:04.423 +07:00 [DBG] Cache miss when loading all keys.
2022-05-27 15:31:04.429 +07:00 [DBG] Loading keys from store.
2022-05-27 15:31:05.016 +07:00 [DBG] Keys successfully returned from store.
2022-05-27 15:31:05.021 +07:00 [DBG] Caching keys with KeyCacheDuration for "1.00:00:00"
2022-05-27 15:31:05.034 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:31:05.035 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:31:05.039 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:05.043 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.044 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.052 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:05.053 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.053 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:47:00"
2022-05-27 15:31:05.114 +07:00 [DBG] Getting the current key.
2022-05-27 15:31:05.115 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:31:05.115 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:31:05.115 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:31:05.115 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:05.115 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.116 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.116 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:05.116 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:05.116 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:47:00"
2022-05-27 15:31:05.117 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.19:47:00". Retires in "100.19:47:00"
2022-05-27 15:31:05.170 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-05-27 15:31:05.185 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-05-27 15:31:05.186 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-05-27 15:31:05.190 +07:00 [DBG] Start authorize request
2022-05-27 15:31:05.221 +07:00 [DBG] No user present in authorize request
2022-05-27 15:31:05.528 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 15:31:05.561 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:05.593 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 15:31:05.666 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 15:31:05.703 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"4b44b241c9914712a263b028ea08b07b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"4b44b241c9914712a263b028ea08b07b","code_challenge":"fx9jIuOubn7-ljnZQ7oQ79agpqvV3GyoKaiWfis1lNI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 15:31:05.737 +07:00 [INF] Showing login: User is not authenticated
2022-05-27 15:31:05.737 +07:00 [INF] Changing response to LoginRequired: prompt=none was requested
2022-05-27 15:31:05.741 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"4b44b241c9914712a263b028ea08b07b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"4b44b241c9914712a263b028ea08b07b","code_challenge":"fx9jIuOubn7-ljnZQ7oQ79agpqvV3GyoKaiWfis1lNI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 15:31:05.756 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":null,"Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000048-0005-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T08:31:05.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-05-27 15:31:07.055 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-05-27 15:31:07.056 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-05-27 15:31:07.057 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-05-27 15:31:07.057 +07:00 [DBG] Start authorize request
2022-05-27 15:31:07.058 +07:00 [DBG] No user present in authorize request
2022-05-27 15:31:07.058 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 15:31:07.059 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:07.060 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 15:31:07.061 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 15:31:07.061 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"8a6ebda5595f494f8f8bb1e56252adc2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"8a6ebda5595f494f8f8bb1e56252adc2","code_challenge":"Eg98CMSAoaTOYn_qpm6Ke3DsQTZTihzpInQ_nCcg5Xg","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 15:31:07.062 +07:00 [INF] Showing login: User is not authenticated
2022-05-27 15:31:16.917 +07:00 [DBG] Augmenting SignInContext
2022-05-27 15:31:16.920 +07:00 [DBG] Adding idp claim with value: local
2022-05-27 15:31:16.920 +07:00 [DBG] Adding auth_time claim with value: 1653640276
2022-05-27 15:31:16.976 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2022-05-27 15:31:16.977 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeCallbackEndpoint
2022-05-27 15:31:16.978 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-05-27 15:31:16.982 +07:00 [DBG] Start authorize callback request
2022-05-27 15:31:16.982 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 15:31:16.982 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 15:31:16.983 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:16.983 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 15:31:16.984 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 15:31:16.991 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"8a6ebda5595f494f8f8bb1e56252adc2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"8a6ebda5595f494f8f8bb1e56252adc2","code_challenge":"Eg98CMSAoaTOYn_qpm6Ke3DsQTZTihzpInQ_nCcg5Xg","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 15:31:17.146 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-05-27 15:31:17.155 +07:00 [DBG] Creating Authorization Code Flow response.
2022-05-27 15:31:17.265 +07:00 [DBG] XEgs0fm93w39QxTDHSTB+Ctw+SN9ZXR6zqlYgotBclk= not found in database
2022-05-27 15:31:18.424 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****0013","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000009d-0001-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T08:31:18.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 15:31:18.428 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"8a6ebda5595f494f8f8bb1e56252adc2","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-05-27 15:31:18.439 +07:00 [DBG] Augmenting SignInContext
2022-05-27 15:31:19.934 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 15:31:19.935 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 15:31:19.935 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 15:31:19.936 +07:00 [DBG] Start discovery request
2022-05-27 15:31:19.937 +07:00 [DBG] Getting all the keys.
2022-05-27 15:31:19.937 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:31:19.937 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:31:19.938 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:31:19.938 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:19.939 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.939 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.940 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:19.940 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.940 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:46:46"
2022-05-27 15:31:19.942 +07:00 [DBG] Getting the current key.
2022-05-27 15:31:19.942 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:31:19.942 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:31:19.942 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:31:19.943 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:19.943 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.943 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.943 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:19.944 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:19.944 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:46:46"
2022-05-27 15:31:19.944 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.19:46:46". Retires in "100.19:46:46"
2022-05-27 15:31:19.961 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-05-27 15:31:19.967 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-05-27 15:31:19.968 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-05-27 15:31:19.988 +07:00 [DBG] Start token request.
2022-05-27 15:31:19.994 +07:00 [DBG] Start client validation
2022-05-27 15:31:20.007 +07:00 [DBG] Start parsing Basic Authentication secret
2022-05-27 15:31:20.015 +07:00 [DBG] Start parsing for secret in post body
2022-05-27 15:31:20.016 +07:00 [DBG] client id without secret found
2022-05-27 15:31:20.017 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-05-27 15:31:20.018 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-05-27 15:31:20.018 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:20.018 +07:00 [DBG] Public Client - skipping secret validation success
2022-05-27 15:31:20.019 +07:00 [DBG] Client validation success
2022-05-27 15:31:20.022 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"8000002b-0006-fc00-b63f-84710c7967bb","TimeStamp":"2022-05-27T08:31:20.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-05-27 15:31:20.030 +07:00 [DBG] Start token request validation
2022-05-27 15:31:20.047 +07:00 [DBG] Start validation of authorization code token request
2022-05-27 15:31:20.119 +07:00 [DBG] XEgs0fm93w39QxTDHSTB+Ctw+SN9ZXR6zqlYgotBclk= found in database: true
2022-05-27 15:31:20.162 +07:00 [DBG] removing XEgs0fm93w39QxTDHSTB+Ctw+SN9ZXR6zqlYgotBclk= persisted grant from database
2022-05-27 15:31:20.241 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-05-27 15:31:20.258 +07:00 [DBG] Validation of authorization code token request success
2022-05-27 15:31:20.266 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****0013","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"F5E1321A361B64CAA6B4590C1B55D9D7BFBAE21E0479627E7490E58131770013","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"b8034973a71446f28f6844b4b62b122be7aa039612ca43c3a85e7c1877033d22154c0f2a609a4a028a7f202a49d9832a","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-05-27 15:31:20.288 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:20.318 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-05-27 15:31:20.319 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 15:31:20.881 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:20.897 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-05-27 15:31:20.897 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-05-27 15:31:20.908 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****2LCw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****miXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000002b-0006-fc00-b63f-84710c7967bb","TimeStamp":"2022-05-27T08:31:20.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 15:31:20.910 +07:00 [DBG] Token request success.
2022-05-27 15:31:21.121 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-05-27 15:31:21.124 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-05-27 15:31:21.125 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-05-27 15:31:21.131 +07:00 [DBG] Start userinfo request
2022-05-27 15:31:21.136 +07:00 [DBG] Bearer token found in header
2022-05-27 15:31:21.148 +07:00 [DBG] Getting all the keys.
2022-05-27 15:31:21.148 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:31:21.148 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:31:21.148 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:31:21.148 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:21.149 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:21.149 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:21.149 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:31:21.149 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:31:21.149 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:46:44"
2022-05-27 15:31:21.212 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:21.218 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 15:31:21.230 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-05-27 15:31:21.232 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"33A527A29D73486DA7E9153B7B573E2B","Claims":{"iss":"https://localhost:44312","nbf":1653640280,"iat":1653640280,"exp":1653643880,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1653640276,"idp":"local","sid":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","jti":"33A527A29D73486DA7E9153B7B573E2B"},"$type":"TokenValidationLog"}
2022-05-27 15:31:21.247 +07:00 [DBG] Creating userinfo response
2022-05-27 15:31:21.251 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-05-27 15:31:21.259 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-05-27 15:31:21.273 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-05-27 15:31:21.273 +07:00 [DBG] End userinfo request
2022-05-27 15:31:21.324 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 15:31:21.325 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 15:31:21.326 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 15:31:21.328 +07:00 [DBG] Rendering check session result
2022-05-27 15:31:21.546 +07:00 [INF] Request: GetTodosQuery 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"$type":"GetTodosQuery"}
2022-05-27 15:36:49.966 +07:00 [INF] Request: UpdateTodoItemCommand 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"Id":1004,"Title":"Bread","Done":false,"$type":"UpdateTodoItemCommand"}
2022-05-27 15:36:50.234 +07:00 [INF] Request: UpdateTodoItemCommand 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"Id":1004,"Title":"Bread","Done":true,"$type":"UpdateTodoItemCommand"}
2022-05-27 15:43:55.360 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 15:43:55.370 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 15:43:55.370 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 15:43:55.371 +07:00 [DBG] Start discovery request
2022-05-27 15:43:55.371 +07:00 [DBG] Getting all the keys.
2022-05-27 15:43:55.371 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.372 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.372 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.372 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.372 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.372 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.373 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.374 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.374 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.376 +07:00 [DBG] Getting the current key.
2022-05-27 15:43:55.376 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.376 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.377 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.377 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.378 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.378 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.379 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.380 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.380 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.381 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.19:34:10". Retires in "100.19:34:10"
2022-05-27 15:43:55.401 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 15:43:55.401 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 15:43:55.401 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 15:43:55.402 +07:00 [DBG] Start discovery request
2022-05-27 15:43:55.402 +07:00 [DBG] Getting all the keys.
2022-05-27 15:43:55.402 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.402 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.402 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.403 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.403 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.403 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.403 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.403 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.404 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.404 +07:00 [DBG] Getting the current key.
2022-05-27 15:43:55.405 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.405 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.405 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.405 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.406 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.406 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.406 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.406 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.406 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.407 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.19:34:10". Retires in "100.19:34:10"
2022-05-27 15:43:55.416 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 15:43:55.416 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 15:43:55.417 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 15:43:55.417 +07:00 [DBG] Start discovery request
2022-05-27 15:43:55.417 +07:00 [DBG] Getting all the keys.
2022-05-27 15:43:55.417 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.418 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.418 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.418 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.418 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.418 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.419 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.419 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.419 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.420 +07:00 [DBG] Getting the current key.
2022-05-27 15:43:55.420 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 15:43:55.420 +07:00 [DBG] Looking for active signing keys.
2022-05-27 15:43:55.420 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 15:43:55.420 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.420 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.421 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.421 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 15:43:55.421 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 15:43:55.421 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.19:34:10"
2022-05-27 15:43:55.421 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.19:34:10". Retires in "100.19:34:10"
2022-05-27 15:43:55.486 +07:00 [INF] Request: GetTodosQuery 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"$type":"GetTodosQuery"}
2022-05-27 15:43:55.506 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 15:43:55.507 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 15:43:55.507 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 15:43:55.507 +07:00 [DBG] Rendering check session result
2022-05-27 15:43:55.726 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 15:43:55.729 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 15:43:55.729 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 15:43:55.730 +07:00 [DBG] Rendering check session result
2022-05-27 15:43:55.739 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 15:43:55.740 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 15:43:55.742 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 15:43:55.742 +07:00 [DBG] Rendering check session result
2022-05-27 16:30:21.448 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-05-27 16:30:21.448 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-05-27 16:30:21.448 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-05-27 16:30:21.474 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-05-27 16:30:21.474 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-05-27 16:30:21.474 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: Duende.IdentityServer.Endpoints.AuthorizeEndpoint
2022-05-27 16:30:21.475 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-05-27 16:30:21.475 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-05-27 16:30:21.475 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-05-27 16:30:21.475 +07:00 [DBG] Start authorize request
2022-05-27 16:30:21.475 +07:00 [DBG] Start authorize request
2022-05-27 16:30:21.475 +07:00 [DBG] Start authorize request
2022-05-27 16:30:21.476 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:21.476 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:21.476 +07:00 [DBG] User in authorize request: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:21.476 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 16:30:21.476 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 16:30:21.477 +07:00 [DBG] Start authorize request protocol validation
2022-05-27 16:30:21.478 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:21.478 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:21.478 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:21.479 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 16:30:21.479 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 16:30:21.479 +07:00 [DBG] Checking for PKCE parameters
2022-05-27 16:30:21.480 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 16:30:21.480 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 16:30:21.481 +07:00 [DBG] Calling into custom validator: Duende.IdentityServer.Validation.DefaultCustomAuthorizeRequestValidator
2022-05-27 16:30:21.482 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"4d09c3d6102c42809e6f08eb809ed73e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"4d09c3d6102c42809e6f08eb809ed73e","code_challenge":"gPdOh0OuehxeZ5NKtk_AwQY6OICTxfpJnb2Fc7gh7jE","code_challenge_method":"S256","prompt":"none","id_token_hint":"***REDACTED***","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 16:30:21.482 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"4aee313cba5745a8974d791905eb1388","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"4aee313cba5745a8974d791905eb1388","code_challenge":"zpPHacr4kPCV1NjWLKN1L8K7On9R7NbLcjTsuqrMzhU","code_challenge_method":"S256","prompt":"none","id_token_hint":"***REDACTED***","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 16:30:21.482 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","AllowedRedirectUris":["/authentication/login-callback"],"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"CleanArchitecture.WebUIAPI openid profile","State":"79480f548acd4d67b346535e5638a0eb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","Raw":{"client_id":"CleanArchitecture.WebUI","redirect_uri":"https://localhost:44312/authentication/login-callback","response_type":"code","scope":"CleanArchitecture.WebUIAPI openid profile","state":"79480f548acd4d67b346535e5638a0eb","code_challenge":"8II7xQjmvjGFPe-WyUgZzszkB5SDVjCqgGNh3E6lN2I","code_challenge_method":"S256","prompt":"none","id_token_hint":"***REDACTED***","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2022-05-27 16:30:21.483 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-05-27 16:30:21.483 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-05-27 16:30:21.483 +07:00 [DBG] Client is configured to not require consent, no consent is required
2022-05-27 16:30:21.483 +07:00 [DBG] Creating Authorization Code Flow response.
2022-05-27 16:30:21.483 +07:00 [DBG] Creating Authorization Code Flow response.
2022-05-27 16:30:21.484 +07:00 [DBG] Creating Authorization Code Flow response.
2022-05-27 16:30:21.504 +07:00 [DBG] Sw8E1XjEjUCNozWKn1xNrADfck4dt5JxcVXte+w1wzQ= not found in database
2022-05-27 16:30:21.515 +07:00 [DBG] +xZFcOp4VGc7m9XcerQxwtoWwW4lSl07Ec9gEgzprHg= not found in database
2022-05-27 16:30:21.515 +07:00 [DBG] 4O88qMn9T9d1CP4Np4Wu/llW2JTvsmRnx7/Q9q4d+CY= not found in database
2022-05-27 16:30:21.569 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****3463","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000115-0002-fe00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:21.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:21.569 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****E7F3","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000008c-0007-ff00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:21.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:21.570 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"4d09c3d6102c42809e6f08eb809ed73e","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-05-27 16:30:21.570 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"4aee313cba5745a8974d791905eb1388","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-05-27 16:30:21.570 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","Endpoint":"Authorize","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****9B73","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"800000a4-0004-fc00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:21.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:21.571 +07:00 [DBG] Authorize endpoint response
{"SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","ClientId":"CleanArchitecture.WebUI","RedirectUri":"https://localhost:44312/authentication/login-callback","State":"79480f548acd4d67b346535e5638a0eb","Scope":"CleanArchitecture.WebUIAPI openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2022-05-27 16:30:26.445 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.445 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.445 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.445 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.446 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.446 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.446 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.446 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.446 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.446 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.447 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.447 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.447 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.447 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.448 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.448 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.448 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.448 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.449 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.449 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.449 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.449 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.449 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.449 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.450 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.485 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.485 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.486 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.486 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.486 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.486 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.486 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.486 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.486 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.487 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.487 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.487 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.487 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.487 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.488 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.488 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.488 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.489 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.489 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.489 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.489 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.489 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.490 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.490 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.490 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.504 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.504 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.504 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.504 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.505 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.505 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.505 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.505 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.505 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.505 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.506 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.506 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.506 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.506 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.507 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.507 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.507 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.508 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.508 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.508 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.508 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.509 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.509 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.509 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.509 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.530 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.530 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.531 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.531 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.531 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.531 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.531 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.532 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.532 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.532 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.532 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.532 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.532 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.533 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.533 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.533 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.533 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.533 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.534 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.534 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.534 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.534 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.534 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.535 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.535 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.550 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.551 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.551 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.551 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.551 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.552 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.552 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.552 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.552 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.552 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.553 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.553 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.553 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.553 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.554 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.554 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.554 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.555 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.555 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.555 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.555 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.555 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.555 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.556 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.556 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.591 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.591 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.591 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.592 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.592 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.592 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.592 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.593 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.593 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.593 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.593 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.593 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.594 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.594 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.594 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.595 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.595 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.595 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.595 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.595 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.595 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.595 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.596 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.596 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.596 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.604 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.604 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.604 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.604 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.604 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.605 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.605 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.605 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.605 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.606 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.606 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.606 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.606 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.606 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.607 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.607 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.607 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.608 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.608 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.608 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.608 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.608 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.609 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.609 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.609 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.632 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.632 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.632 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.632 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.632 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.632 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.633 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.633 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.633 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.633 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.633 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.634 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.634 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.634 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.635 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.635 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.635 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.635 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.635 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.636 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.636 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.636 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.636 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.636 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.636 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.643 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-05-27 16:30:26.643 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: Duende.IdentityServer.Endpoints.DiscoveryEndpoint
2022-05-27 16:30:26.643 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-05-27 16:30:26.643 +07:00 [DBG] Start discovery request
2022-05-27 16:30:26.643 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.643 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.644 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.644 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.644 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.644 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.644 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.644 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.645 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.645 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.645 +07:00 [DBG] Getting the current key.
2022-05-27 16:30:26.646 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.646 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.646 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.646 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.647 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.647 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.647 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.647 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.648 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.648 +07:00 [INF] Active signing key found with kid 8965CB419F570274991FB1BA3353E7E5 for alg RS256. Expires in "86.18:47:39". Retires in "100.18:47:39"
2022-05-27 16:30:26.685 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 16:30:26.685 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 16:30:26.685 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 16:30:26.685 +07:00 [DBG] Rendering check session result
2022-05-27 16:30:26.696 +07:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2022-05-27 16:30:26.696 +07:00 [DBG] Endpoint enabled: Checksession, successfully created handler: Duende.IdentityServer.Endpoints.CheckSessionEndpoint
2022-05-27 16:30:26.696 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.CheckSessionEndpoint for /connect/checksession
2022-05-27 16:30:26.697 +07:00 [DBG] Rendering check session result
2022-05-27 16:30:26.728 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-05-27 16:30:26.731 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-05-27 16:30:26.731 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-05-27 16:30:26.732 +07:00 [DBG] Start token request.
2022-05-27 16:30:26.733 +07:00 [DBG] Start client validation
2022-05-27 16:30:26.733 +07:00 [DBG] Start parsing Basic Authentication secret
2022-05-27 16:30:26.733 +07:00 [DBG] Start parsing for secret in post body
2022-05-27 16:30:26.734 +07:00 [DBG] client id without secret found
2022-05-27 16:30:26.735 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-05-27 16:30:26.735 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-05-27 16:30:26.735 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.736 +07:00 [DBG] Public Client - skipping secret validation success
2022-05-27 16:30:26.736 +07:00 [DBG] Client validation success
2022-05-27 16:30:26.737 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"8000004c-0003-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-05-27 16:30:26.738 +07:00 [DBG] Start token request validation
2022-05-27 16:30:26.738 +07:00 [DBG] Start validation of authorization code token request
2022-05-27 16:30:26.749 +07:00 [DBG] Sw8E1XjEjUCNozWKn1xNrADfck4dt5JxcVXte+w1wzQ= found in database: true
2022-05-27 16:30:26.751 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-05-27 16:30:26.755 +07:00 [DBG] removing Sw8E1XjEjUCNozWKn1xNrADfck4dt5JxcVXte+w1wzQ= persisted grant from database
2022-05-27 16:30:26.766 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-05-27 16:30:26.773 +07:00 [DBG] Validation of authorization code token request success
2022-05-27 16:30:26.774 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****3463","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"5D886F6B57561A12F3A5BFDD0D676D84789FB6282C5B02B91FE959861D7E3463","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"4f9d6b75f5de4d548d585fea3d1870b5f7c617bd36d84d778df608e2d7b4210ce78afe8d10a14341b86262a3e34ec3ef","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-05-27 16:30:26.775 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.776 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-05-27 16:30:26.776 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-05-27 16:30:26.776 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:26.794 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.794 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-05-27 16:30:26.794 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-05-27 16:30:26.800 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Cy6w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****w-iw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000004c-0003-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:26.801 +07:00 [DBG] Token request success.
2022-05-27 16:30:26.810 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-05-27 16:30:26.810 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: Duende.IdentityServer.Endpoints.TokenEndpoint
2022-05-27 16:30:26.810 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-05-27 16:30:26.810 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.TokenEndpoint for /connect/token
2022-05-27 16:30:26.811 +07:00 [DBG] Start token request.
2022-05-27 16:30:26.811 +07:00 [DBG] Start token request.
2022-05-27 16:30:26.811 +07:00 [DBG] Start client validation
2022-05-27 16:30:26.811 +07:00 [DBG] Start client validation
2022-05-27 16:30:26.811 +07:00 [DBG] Start parsing Basic Authentication secret
2022-05-27 16:30:26.811 +07:00 [DBG] Start parsing Basic Authentication secret
2022-05-27 16:30:26.812 +07:00 [DBG] Start parsing for secret in post body
2022-05-27 16:30:26.812 +07:00 [DBG] Start parsing for secret in post body
2022-05-27 16:30:26.812 +07:00 [DBG] client id without secret found
2022-05-27 16:30:26.812 +07:00 [DBG] client id without secret found
2022-05-27 16:30:26.812 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-05-27 16:30:26.812 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-05-27 16:30:26.812 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-05-27 16:30:26.813 +07:00 [DBG] Secret id found: CleanArchitecture.WebUI
2022-05-27 16:30:26.813 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.813 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.813 +07:00 [DBG] Public Client - skipping secret validation success
2022-05-27 16:30:26.813 +07:00 [DBG] Public Client - skipping secret validation success
2022-05-27 16:30:26.813 +07:00 [DBG] Client validation success
2022-05-27 16:30:26.813 +07:00 [DBG] Client validation success
2022-05-27 16:30:26.813 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"8000006f-0006-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-05-27 16:30:26.813 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"80000054-0005-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-05-27 16:30:26.814 +07:00 [DBG] Start token request validation
2022-05-27 16:30:26.814 +07:00 [DBG] Start token request validation
2022-05-27 16:30:26.814 +07:00 [DBG] Start validation of authorization code token request
2022-05-27 16:30:26.814 +07:00 [DBG] Start validation of authorization code token request
2022-05-27 16:30:26.820 +07:00 [DBG] +xZFcOp4VGc7m9XcerQxwtoWwW4lSl07Ec9gEgzprHg= found in database: true
2022-05-27 16:30:26.820 +07:00 [DBG] 4O88qMn9T9d1CP4Np4Wu/llW2JTvsmRnx7/Q9q4d+CY= found in database: true
2022-05-27 16:30:26.833 +07:00 [DBG] removing +xZFcOp4VGc7m9XcerQxwtoWwW4lSl07Ec9gEgzprHg= persisted grant from database
2022-05-27 16:30:26.834 +07:00 [DBG] removing 4O88qMn9T9d1CP4Np4Wu/llW2JTvsmRnx7/Q9q4d+CY= persisted grant from database
2022-05-27 16:30:26.839 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-05-27 16:30:26.840 +07:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2022-05-27 16:30:26.847 +07:00 [DBG] Validation of authorization code token request success
2022-05-27 16:30:26.847 +07:00 [DBG] Validation of authorization code token request success
2022-05-27 16:30:26.848 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****E7F3","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"81C17B8096358006D96F1F53CDA0B39F07EB9F80A00F9293ED14E57C0730E7F3","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"20da8d4eaa074711b0ede2f92e176033da8bbc07557a4e7bbd73f3732a6b0f68c0dedce2cf2d415591731b5279c01659","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-05-27 16:30:26.848 +07:00 [INF] Token request validation success, {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****9B73","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"CleanArchitecture.WebUI","code":"77382C8031BA3BA809BFACA8B3F5E9F0232A10FA85A4736513D38330ECCC9B73","redirect_uri":"https://localhost:44312/authentication/login-callback","code_verifier":"c5fe5acd9ab84414a0c674afc926a91b7549b280465d410dacb1bec54a13445255c07fdaf1fd4711a18fc4755432a9e5","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2022-05-27 16:30:26.849 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.849 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.849 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-05-27 16:30:26.849 +07:00 [DBG] Getting claims for access token for client: CleanArchitecture.WebUI
2022-05-27 16:30:26.849 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:26.849 +07:00 [DBG] Getting claims for access token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470
2022-05-27 16:30:26.868 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-05-27 16:30:26.869 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-05-27 16:30:26.869 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-05-27 16:30:26.869 +07:00 [DBG] Start userinfo request
2022-05-27 16:30:26.869 +07:00 [DBG] Bearer token found in header
2022-05-27 16:30:26.870 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.870 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.870 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.870 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.870 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.870 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.871 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.871 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.871 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.871 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.873 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.873 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.873 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-05-27 16:30:26.874 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.873 +07:00 [DBG] Getting claims for identity token for subject: 21e5069d-a790-49de-8b3b-3cc4584d9470 and client: CleanArchitecture.WebUI
2022-05-27 16:30:26.874 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-05-27 16:30:26.874 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-05-27 16:30:26.874 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.882 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-05-27 16:30:26.882 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****yIPw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****MUng","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"80000054-0005-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:26.884 +07:00 [DBG] Token request success.
2022-05-27 16:30:26.884 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"A4DDCBF431586B3E00E541CDDC5AFD16","Claims":{"iss":"https://localhost:44312","nbf":1653643826,"iat":1653643826,"exp":1653647426,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1653640276,"idp":"local","sid":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","jti":"A4DDCBF431586B3E00E541CDDC5AFD16"},"$type":"TokenValidationLog"}
2022-05-27 16:30:26.886 +07:00 [DBG] Creating userinfo response
2022-05-27 16:30:26.886 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-05-27 16:30:26.887 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-05-27 16:30:26.895 +07:00 [INF] {"ClientId":"CleanArchitecture.WebUI","ClientName":"CleanArchitecture.WebUI","RedirectUri":null,"Endpoint":"Token","SubjectId":"21e5069d-a790-49de-8b3b-3cc4584d9470","Scopes":"CleanArchitecture.WebUIAPI openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****6OwA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****C13Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"8000006f-0006-fd00-b63f-84710c7967bb","TimeStamp":"2022-05-27T09:30:26.0000000Z","ProcessId":7108,"LocalIpAddress":"::1:44312","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-05-27 16:30:26.896 +07:00 [DBG] Token request success.
2022-05-27 16:30:26.898 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-05-27 16:30:26.899 +07:00 [DBG] End userinfo request
2022-05-27 16:30:26.910 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-05-27 16:30:26.923 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-05-27 16:30:26.923 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-05-27 16:30:26.923 +07:00 [DBG] Start userinfo request
2022-05-27 16:30:26.923 +07:00 [DBG] Bearer token found in header
2022-05-27 16:30:26.924 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.924 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.924 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.924 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.924 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.925 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.925 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.925 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.925 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.925 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.926 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.927 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.934 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-05-27 16:30:26.938 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"0A2738BF1D85D1D8B8A361807C77D787","Claims":{"iss":"https://localhost:44312","nbf":1653643826,"iat":1653643826,"exp":1653647426,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1653640276,"idp":"local","sid":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","jti":"0A2738BF1D85D1D8B8A361807C77D787"},"$type":"TokenValidationLog"}
2022-05-27 16:30:26.939 +07:00 [DBG] Creating userinfo response
2022-05-27 16:30:26.939 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-05-27 16:30:26.940 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-05-27 16:30:26.949 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-05-27 16:30:26.949 +07:00 [DBG] End userinfo request
2022-05-27 16:30:26.957 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2022-05-27 16:30:26.958 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: Duende.IdentityServer.Endpoints.UserInfoEndpoint
2022-05-27 16:30:26.958 +07:00 [INF] Invoking IdentityServer endpoint: Duende.IdentityServer.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-05-27 16:30:26.958 +07:00 [DBG] Start userinfo request
2022-05-27 16:30:26.958 +07:00 [DBG] Bearer token found in header
2022-05-27 16:30:26.959 +07:00 [DBG] Getting all the keys.
2022-05-27 16:30:26.959 +07:00 [DBG] Cache hit when loading all keys.
2022-05-27 16:30:26.959 +07:00 [DBG] Looking for active signing keys.
2022-05-27 16:30:26.959 +07:00 [DBG] Looking for an active signing key for alg RS256.
2022-05-27 16:30:26.959 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.959 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.959 +07:00 [DBG] Found active signing key for alg RS256 with kid 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.960 +07:00 [DBG] No active signing key found (respecting the activation delay).
2022-05-27 16:30:26.960 +07:00 [DBG] Active signing key found (ignoring the activation delay) with kid: 8965CB419F570274991FB1BA3353E7E5.
2022-05-27 16:30:26.960 +07:00 [DBG] Key rotation not required for alg RS256; New key expected to be created in "72.18:47:39"
2022-05-27 16:30:26.961 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.962 +07:00 [DBG] client configuration validation for client CleanArchitecture.WebUI succeeded.
2022-05-27 16:30:26.971 +07:00 [DBG] Calling into custom token validator: Duende.IdentityServer.Validation.DefaultCustomTokenValidator
2022-05-27 16:30:26.973 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"570D7D3E0217EE23B9230A3720AF2BA9","Claims":{"iss":"https://localhost:44312","nbf":1653643826,"iat":1653643826,"exp":1653647426,"aud":"CleanArchitecture.WebUIAPI","scope":["CleanArchitecture.WebUIAPI","openid","profile"],"amr":"pwd","client_id":"CleanArchitecture.WebUI","sub":"21e5069d-a790-49de-8b3b-3cc4584d9470","auth_time":1653640276,"idp":"local","sid":"3B802CCBC8C9CFDAAE2FBCFCFBB85547","jti":"570D7D3E0217EE23B9230A3720AF2BA9"},"$type":"TokenValidationLog"}
2022-05-27 16:30:26.974 +07:00 [DBG] Creating userinfo response
2022-05-27 16:30:26.974 +07:00 [DBG] Scopes in access token: CleanArchitecture.WebUIAPI openid profile
2022-05-27 16:30:26.975 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2022-05-27 16:30:26.985 +07:00 [INF] Profile service returned the following claim types: sub preferred_username name
2022-05-27 16:30:26.985 +07:00 [DBG] End userinfo request
2022-05-27 17:02:01.026 +07:00 [INF] Request: UpdateTodoItemCommand 21e5069d-a790-49de-8b3b-3cc4584d9470 minhnhat2110.hcm06@gmail.com {"Id":1004,"Title":"Bread","Done":true,"$type":"UpdateTodoItemCommand"}
2022-05-27 17:02:01.054 +07:00 [INF] Publishing domain event. Event - TodoItemCompletedEvent
2022-05-27 17:02:01.071 +07:00 [INF] CleanArchitecture Domain Event: TodoItemCompletedEvent
